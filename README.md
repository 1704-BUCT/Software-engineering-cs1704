### api接口文档

#### 1.前言

1. 服务器地址：39.97.241.101

2. 用户名：Administrator

3. 密码：cs1704CS1704

4. （如果密码被和谐了来私聊我）

5. 目前服务器上已配置apach-tomcat、mysql。已有部分数据。
6. 以http://+ip+port+url的格式访问，如：http://39.97.241.101:8080/museum/:id

#### 2.接口表

写完感觉服务和接口可能存在不对应的关系，请各组检查一下有没有自己需要的接口！！

2020.4.30	删去了大量不需要的接口，修改了很多

| 功能                       | 请求类型 | url                      | 必填参数                                                     | 返回类型 | 返回数据示例                                                 | 疑问栏                                                       |
| -------------------------- | -------- | ------------------------ | ------------------------------------------------------------ | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 返回单个博物馆信息         | get      | /museum/:id              | mid                                                          | json     | {<br />"mid":0,<br />"name":"博物馆0",<br />“introduction”:“2333”,<br />“opentime”:“8:00am-5:00pm”,<br />"collection":[cid0,cid1...],<br />"educations":[eid0,eid1,eid2],<br />"news":[nid0,nid2...],<br />"comments":[cid0,cid1...],<br />"lng":116.34528,<br />"lat":39.21028<br />} | **修改返回数据**                                             |
| 返回某些博物馆信息         | get      | /museum/searchByName     | sreachkw(搜索关键字：博物馆名字)                             | json     | [<br />{<br />"mid":0,<br />"name":"博物馆0",<br />“introduction”:“2333”,<br />“opentime”:“8:00am-5:00pm”,<br />"collection":[cid0,cid1...],<br />"educations":[eid0,eid1,eid2],<br />"news":[nid0,nid2...],<br />"comments":[cid0,cid1...],<br />"lng":116.34528,<br />"lat":39.21028<br />},<br />{<br />"mid":1,<br />"name":"博物馆1",<br />“introduction”:“2333”,<br />“opentime”:“8:00am-5:00pm”,<br />"collection":[cid0,cid1...],<br />"educations":[eid0,eid1,eid2],<br />"news":[nid0,nid2...],<br />"comments":[cid0,cid1...],<br />"lng":116.34528,<br />"lat":39.21028<br />}...<br />] | 搜索到几个博物馆就返回几个博物馆的信息，如果搜索关键字为空，就返回数据库里所有（？会不会太多）博物馆的信息。**修改返回数据** |
| 获取所有博物馆的基本信息   | get      | /museum/all              | 无                                                           |          | [<br/>		{<br/>		mid:1,<br/>		name:1,<br/>		imgurl:图片 1,<br/>		star:博物馆分数1<br/>		}，<br/>		{<br/>		mid:2,<br/>		name:2,<br/>		imgurl:图片2，<br/>		star:博物馆分数2	<br/>		},<br/>		...<br/>		] | 方便APP端以列表方式展示，按star从大到小排序<br />**新增接口** |
| 获取单个展览信息           | get      | /exhibition/:id          | eid                                                          | json     | {<br />"eid":0,<br />"mid":0,<br />"name":"震惊！博物馆0的惊天藏品！",<br />"imgurl":"",<br />"time":"2020-04-29, 8:00am",<br />"mname":所属博物馆名字（查表）,<br />"address":"北京三和胡同996号",<br />"introduction":"这个展览由ACM大牛举办，为世界第一届ACM展览会。到场的嘉宾有AAA，BBB……",<br />"explanations":[该展览的所有讲解]（查表）<br />} | **修改返回数据**                                             |
| 搜索展览基本信息           | get      | /exhibition/searchByName | searchkw(搜索关键字：name)                                   | json     | [<br />数据同上<br />]                                       | 这个展览的时间格式要商量一下<br />**如果搜索结果有几个展览就返回几个展览，如果有多个，前端就显示第一个** |
| 获取所有展览的信息         | get      | /exhibition/all          |                                                              | json     | [<br/>		{<br/>		"eid":0,<br/>		"name":展览的名称,<br/>		"mname":所属博物馆名称,<br/>		"imgurl":展览的图片<br/>		},<br/>		{<br/>		"eid":1,<br/>		"name":展览的名称,<br/>		"mname":所属博物馆名称,<br/>		"imgurl":展览的图片<br/>		},...<br/>		] | APP端可以以列表的形式展现**新增接口**                        |
| 获取单个藏品信息           | get      | /collection/:id          | cid                                                          | json     | {<br/>		cid:<br/>		name:<br/>		imgurl:<br/>		mname:所属博物馆名字.<br/>		maddress:博物馆地址,<br/>		introduce:<br/>		explainations:{讲解格式待定}<br/>		} | **新增接口**                                                 |
| 获取某些藏品的信息         | get      | /collection/searchByName | searchkw(搜索关键字：名字)                                   |          | [<br />{<br/>		cid:<br/>		name:<br/>		imgurl:<br/>		mname:所属博物馆名字，<br/>		maddress:博物馆地址,<br/>		introduce:<br/>		explainations:{讲解格式待定}<br/>		}<br />……<br />] | **新增接口，数据里搜到几个藏品就返回几个藏品的信息，如果传来的字符串为空，就返回所有博物馆的信息** |
| 获取所有藏品的基本信息     | get      | /collection/all          | 无                                                           |          | [<br />{<br/>		cid:0,<br/>		name:藏品名称,<br/>		imgurl:图片1,<br/>		mname:所属博物馆名称<br/>		},<br/>		{<br/>		cid:1,<br/>		name:藏品名称,<br/>		imgurl:图片2,<br/>		mname:所属博物馆名称<br/>		},...<br />] | **新增**                                                     |
| 获取单个教育活动信息       | get      | /education/:id           | oid                                                          |          | {<br/>		oid:<br/>		name:<br/>		imgurl:<br/>		mname:所属博物馆名字.<br/>		maddress:博物馆地址,<br/>		introduce:<br/>		} | **新增**                                                     |
| 搜索某个教育活动的信息     | get      | /education/searchByName  | name                                                         |          | [<br />数据同上]                                             | **新增**                                                     |
| 获取所有教育活动的信息     | get      | /education/all           | 无                                                           |          | [<br />{<br/>		oid:0,<br/>		name:藏品名称,<br/>		imgurl:图片1,<br/>		mname:所属博物馆名称<br/>		},<br/>		{<br/>		oid:1,<br/>		name:藏品名称,<br/>		imgurl:图片2,<br/>		mname:所属博物馆名称<br/>		},...] | **新增**                                                     |
| 获取单个新闻               | get      | /news/:id                | nid（新闻id）                                                | json     | {<br/>		nid:1,<br/>		title:"新闻标题1",<br/>		author:"w1",<br/>		releasetime:2019-04-01,<br/>		extract:"摘要1",<br/>		imgurl:"新闻图片",<br/>		content:"新闻内容",<br/>		url:"新闻的具体内容",<br/>		} | **修改返回数据**                                             |
| 获取所有的新闻             | get      | /news/all                | 无                                                           | json     | [<br/>		{<br/>		nid:1,<br/>		title:"新闻标题1",<br/>		author:"w1",<br/>		releasetime:2019-04-01,<br/>		imgurl:"新闻图片url",<br/>		nature:1<br/>		},<br/>		{<br/>		nid:2,<br/>		title:"新闻标题2",<br/>		author:"w2",<br/>		releasetime:2019-04-01,<br/>		imgurl:"新闻图片url2",<br/>		nature:0<br/>		},...<br/>		] | 表示新闻是否是正面新闻<br />**修改返回数据**                 |
| 爬取指定时间的新闻         | get      |                          | 无，管理员指定时间                                           | json     |                                                              | **最难的部分**需要控制一个python脚本定时运行、结束，还要实现后台能手动控制脚本运行。 |
| 显示一个博物馆的所有评论   | get      | /comments/forMuseum      | searchkw：博物馆名称                                         |          | [<br />{uid:评论用户名字,<br/>  avatar:评论用户头像 <br/> time:评论时间,<br/> ustar:用户对博物馆的打分,<br/>content:评论内容}，<br/>{...},<br/>{...}<br />] | **新增**，按评论时间排序，最新的在最前                       |
| 上传打分                   | post     | /star/upload             | {<br/>		uid:<br/>		mid:<br/>		exhibitionstar:<br/>		servicestar:<br/>		environmentstar:<br/>		} |          | {state:1}(1为成功，0为失败)                                  | 仅有博物馆打分<br />**新增**                                 |
| 上传评论                   | post     | /comment/upload          | {<br/>		  uid:<br/>	       mid:<br/>		  time:<br/>		  content:<br/>} |          | {state:1}  (state值1为成功，0为失败)                         | **新增**                                                     |
| 收藏展览                   | post     | /mark/exhibition         | {<br />uid:1,<br/>eid:1	<br/>		}                    |          | {state:1}  (state值1为成功，0为失败)                         | **新增**                                                     |
| 收藏展品                   | post     | /mark/collection         | {<br />uid:1,<br/>cid:1	<br/>		}                    |          | {state:1}  (state值1为成功，0为失败)                         | **新增**                                                     |
| 收藏教育活动               | post     | /mark/education          | {uid:1,<br/>		oid:1	<br/>		}                  |          | {state:1}  (state值1为成功，0为失败)                         | **新增**                                                     |
| 收藏的新闻                 | post     | /mark/news               | {uid:1,<br/>		nid:1	<br/>		}                  |          | {state:1}  (state值1为成功，0为失败)                         | **新增**                                                     |
| 获取一个用户所有的展览     | get      | /user/exhibition         | uid                                                          |          | [<br />{<br/>		"star_eid":0,<br/>		"name":展览的名称,<br/>		"mname":所属博物馆名称,<br/>		"imgurl":展览的图片<br/>		},<br/>		{<br/>		"star_eid":1,<br/>		"name":展览的名称,<br/>		"mname":所属博物馆名称,<br/>		"imgurl":展览的图片<br/>		},...<br />] | **新增**                                                     |
| 获取一个用户所有收藏的新闻 | get      | /user/news               | uid                                                          |          | [<br />{<br/>		star_nid:1,<br/>		title:"新闻标题1",<br/>		author:"w1",<br/>		releasetime:2019-04-01,<br/>		imgurl:"新闻图片url",<br/>		nature:1<br/>		},<br/>		{<br/>		star_nid:2,<br/>		title:"新闻标题2",<br/>		author:"w2",<br/>		releasetime:2019-04-01,<br/>		imgurl:"新闻图片url2",<br/>		nature:0<br/>		},...<br />] | **新增**                                                     |
| 获取用户所有收藏的藏品     | get      | /user/collection         | uid                                                          |          | [<br />{<br/>		star_cid:0,<br/>		name:藏品名称,<br/>		imgurl:图片1,<br/>		mname:所属博物馆名称<br/>		},<br/>		{<br/>		star_cid:1,<br/>		name:藏品名称,<br/>		imgurl:图片2,<br/>		mname:所属博物馆名称<br/>		},...<br />] | **新增**                                                     |
| 获取用户所有收藏的教育活动 | get      | user/education           | uid                                                          |          | [<br />{<br/>		star_oid:0,<br/>		name:藏品名称,<br/>		imgurl:图片1,<br/>		mname:所属博物馆名称<br/>		},<br/>		{<br/>		star_oid:1,<br/>		name:藏品名称,<br/>		imgurl:图片2,<br/>		mname:所属博物馆名称<br/>		},...<br />] | **新增**                                                     |
